# ãƒ–ãƒ­ã‚°è¨˜äº‹åŸ·ç­†ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ - ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—è¨­è¨ˆæ›¸

## æ¦‚è¦

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¨˜äº‹åŸ·ç­†ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã‚µãƒãƒ¼ãƒˆã™ã‚‹**ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ **ã®ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã€‚

### ã‚³ã‚¢ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
- **æ‰‹å‹•ãƒˆãƒªã‚¬ãƒ¼**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œã‚µã‚¸ã‚§ã‚¹ãƒˆã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã¨ãã ã‘å‹•ä½œ
- **ã‚µã‚¸ã‚§ã‚¹ãƒˆæ©Ÿèƒ½**: åŸ·ç­†ä¸­ã®å†…å®¹ã‚’åˆ†æã—ã¦æ¬¡ã«æ›¸ãã¹ãå†…å®¹ã‚’ææ¡ˆ
- **æ®µéšçš„å®Ÿè£…**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API â†’ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰(React)ã®é †ã§å®Ÿè£…

---

## ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (Phase 2ã§å®Ÿè£…)           â”‚
â”‚ - ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼                             â”‚
â”‚ - ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤º                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ HTTP REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FastAPI ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰                     â”‚
â”‚                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ API Endpoints                      â”‚  â”‚
â”‚ â”‚ POST /assistant/session/create     â”‚  â”‚
â”‚ â”‚ POST /assistant/suggest            â”‚  â”‚
â”‚ â”‚ GET  /assistant/session/{id}       â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â†“                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Session Service                    â”‚  â”‚
â”‚ â”‚ - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†                    â”‚  â”‚
â”‚ â”‚ - åŸ·ç­†çŠ¶æ…‹ä¿å­˜                      â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â†“                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Suggestion Agent (ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼)â”‚ â”‚
â”‚ â”‚ - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç†è§£                  â”‚  â”‚
â”‚ â”‚ - ã‚µã‚¸ã‚§ã‚¹ãƒˆç”Ÿæˆ                    â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â†“                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ MCP Clients (Phase 1.5ã§å®Ÿè£…)      â”‚  â”‚
â”‚ â”‚ - Web Search                       â”‚  â”‚
â”‚ â”‚ - Web Fetch                        â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### WritingSession (åŸ·ç­†ã‚»ãƒƒã‚·ãƒ§ãƒ³)

```python
class WritingSession(BaseModel):
    session_id: str                    # ãƒ¦ãƒ‹ãƒ¼ã‚¯ID
    topic: str                         # è¨˜äº‹ã®ãƒˆãƒ”ãƒƒã‚¯
    target_audience: str               # å¯¾è±¡èª­è€… (beginner/intermediate/advanced)
    outline: List[OutlineSection]      # ç›®æ¬¡
    content: Dict[str, str]            # {section_id: markdown_content}
    created_at: datetime
    updated_at: datetime
```

### OutlineSection (ç›®æ¬¡ã‚»ã‚¯ã‚·ãƒ§ãƒ³)

```python
class OutlineSection(BaseModel):
    section_id: str                    # ã‚»ã‚¯ã‚·ãƒ§ãƒ³ID (ä¾‹: "section_1")
    title: str                         # è¦‹å‡ºã—ã‚¿ã‚¤ãƒˆãƒ«
    level: int                         # è¦‹å‡ºã—ãƒ¬ãƒ™ãƒ« (1=h1, 2=h2, ...)
    order: int                         # è¡¨ç¤ºé †åº
```

### SuggestionRequest (ã‚µã‚¸ã‚§ã‚¹ãƒˆãƒªã‚¯ã‚¨ã‚¹ãƒˆ)

```python
class SuggestionRequest(BaseModel):
    session_id: str                    # ã‚»ãƒƒã‚·ãƒ§ãƒ³ID
    current_section_id: str            # ç¾åœ¨åŸ·ç­†ä¸­ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ID
    current_content: str               # ç¾åœ¨ã®åŸ·ç­†å†…å®¹
```

### SuggestionResponse (ã‚µã‚¸ã‚§ã‚¹ãƒˆãƒ¬ã‚¹ãƒãƒ³ã‚¹)

```python
class SuggestionResponse(BaseModel):
    suggestions: List[Suggestion]      # ã‚µã‚¸ã‚§ã‚¹ãƒˆãƒªã‚¹ãƒˆ
    related_links: List[RelatedLink]   # é–¢é€£ãƒªãƒ³ã‚¯ (Phase 1.5)
    summary_report: str                # è¦ç´„ãƒ¬ãƒãƒ¼ãƒˆ (Phase 1.5)
```

### Suggestion (ã‚µã‚¸ã‚§ã‚¹ãƒˆ)

```python
class Suggestion(BaseModel):
    suggestion_id: str
    type: str                          # "structure" | "content" | "improvement"
    title: str                         # ã‚µã‚¸ã‚§ã‚¹ãƒˆã‚¿ã‚¤ãƒˆãƒ«
    description: str                   # è©³ç´°èª¬æ˜
    priority: int                      # å„ªå…ˆåº¦ (1=é«˜, 2=ä¸­, 3=ä½)
```

### RelatedLink (é–¢é€£ãƒªãƒ³ã‚¯)

```python
class RelatedLink(BaseModel):
    title: str                         # ãƒªãƒ³ã‚¯ã‚¿ã‚¤ãƒˆãƒ«
    url: str                           # URL
    source: str                        # "zenn" | "qiita" | "official"
    relevance_score: float             # é–¢é€£åº¦ã‚¹ã‚³ã‚¢ (0.0-1.0)
```

---

## API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä»•æ§˜

### 1. ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ

**POST /assistant/session/create**

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨˜äº‹åŸ·ç­†ã‚’é–‹å§‹ã™ã‚‹ã¨ãã«å‘¼ã³å‡ºã™ã€‚

**Request**
```json
{
  "topic": "FastAPIã§JWTèªè¨¼ã‚’å®Ÿè£…ã™ã‚‹",
  "target_audience": "intermediate"
}
```

**Response**
```json
{
  "session_id": "sess_abc123def456",
  "topic": "FastAPIã§JWTèªè¨¼ã‚’å®Ÿè£…ã™ã‚‹",
  "outline": [
    {
      "section_id": "section_1",
      "title": "ã¯ã˜ã‚ã«",
      "level": 2,
      "order": 1
    },
    {
      "section_id": "section_2",
      "title": "JWTã¨ã¯",
      "level": 2,
      "order": 2
    },
    {
      "section_id": "section_3",
      "title": "FastAPIã§ã®å®Ÿè£…",
      "level": 2,
      "order": 3
    },
    {
      "section_id": "section_4",
      "title": "ãƒ†ã‚¹ãƒˆ",
      "level": 2,
      "order": 4
    },
    {
      "section_id": "section_5",
      "title": "ã¾ã¨ã‚",
      "level": 2,
      "order": 5
    }
  ],
  "created_at": "2025-12-10T14:30:00Z"
}
```

**ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‹•ä½œ**
1. ãƒˆãƒ”ãƒƒã‚¯ã‚’åˆ†æ
2. å¯¾è±¡èª­è€…ãƒ¬ãƒ™ãƒ«ã«å¿œã˜ãŸç›®æ¬¡ã‚’è‡ªå‹•ç”Ÿæˆ
3. ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã‚’ç™ºè¡Œã—ã¦ä¿å­˜

---

### 2. ã‚µã‚¸ã‚§ã‚¹ãƒˆç”Ÿæˆ

**POST /assistant/suggest**

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œã‚µã‚¸ã‚§ã‚¹ãƒˆã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã¨ãã«å‘¼ã³å‡ºã™ã€‚

**Request**
```json
{
  "session_id": "sess_abc123def456",
  "current_section_id": "section_3",
  "current_content": "# FastAPIã§ã®å®Ÿè£…\n\nã¾ãšã€å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚\n\n```bash\npip install python-jose[cryptography] passlib[bcrypt]\n```\n\næ¬¡ã«JWTãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°ã‚’ä½œæˆã—ã¾ã™..."
}
```

**Response**
```json
{
  "suggestions": [
    {
      "suggestion_id": "sug_1",
      "type": "content",
      "title": "ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ã®å®Ÿè£…ã‚‚è¿½åŠ ",
      "description": "ãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆã ã‘ã§ãªãã€ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ¤œè¨¼ã™ã‚‹é–¢æ•°ã‚‚å®Ÿè£…ã™ã‚‹ã¨å®Œå…¨ãªèªè¨¼ãƒ•ãƒ­ãƒ¼ã«ãªã‚Šã¾ã™ã€‚`verify_token()`é–¢æ•°ã®å®Ÿè£…ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚",
      "priority": 1
    },
    {
      "suggestion_id": "sug_2",
      "type": "structure",
      "title": "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®æ³¨æ„ç‚¹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ",
      "description": "JWTèªè¨¼ã«ã¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ³¨æ„ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚ã€Œã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¦ã€SECRET_KEYã®ç®¡ç†ã‚„ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æœŸé™ã«ã¤ã„ã¦èª¬æ˜ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚",
      "priority": 2
    },
    {
      "suggestion_id": "sug_3",
      "type": "improvement",
      "title": "ã‚³ãƒ¼ãƒ‰ä¾‹ã«èª¬æ˜ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ",
      "description": "ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã«èª¬æ˜ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹ã¨ã€åˆå¿ƒè€…ã«ã‚‚ç†è§£ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚",
      "priority": 3
    }
  ],
  "related_links": [],
  "summary_report": ""
}
```

**ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‹•ä½œ**
1. ç¾åœ¨ã®åŸ·ç­†å†…å®¹ã‚’åˆ†æ
2. ã‚»ãƒƒã‚·ãƒ§ãƒ³å…¨ä½“ã®æ–‡è„ˆã‚’è€ƒæ…®
3. æ¬¡ã«æ›¸ãã¹ãå†…å®¹ã€æ”¹å–„ç‚¹ã€æ§‹æˆã®ææ¡ˆã‚’ç”Ÿæˆ
4. å„ªå…ˆåº¦ä»˜ã‘ã—ã¦è¿”å´

---

### 3. ã‚»ãƒƒã‚·ãƒ§ãƒ³å–å¾—

**GET /assistant/session/{session_id}**

ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ã‚’å–å¾—ã™ã‚‹ã€‚

**Response**
```json
{
  "session_id": "sess_abc123def456",
  "topic": "FastAPIã§JWTèªè¨¼ã‚’å®Ÿè£…ã™ã‚‹",
  "target_audience": "intermediate",
  "outline": [...],
  "content": {
    "section_1": "# ã¯ã˜ã‚ã«\n\nã“ã®è¨˜äº‹ã§ã¯...",
    "section_3": "# FastAPIã§ã®å®Ÿè£…\n\nã¾ãšã€å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’..."
  },
  "created_at": "2025-12-10T14:30:00Z",
  "updated_at": "2025-12-10T15:00:00Z"
}
```

---

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­è¨ˆ

### SuggestionAgent (ã‚µã‚¸ã‚§ã‚¹ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ)

**è²¬å‹™**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åŸ·ç­†å†…å®¹ã‚’åˆ†æ
- æ¬¡ã«æ›¸ãã¹ãå†…å®¹ã‚’ææ¡ˆ
- æ§‹æˆã®æ”¹å–„ç‚¹ã‚’æŒ‡æ‘˜
- å†…å®¹ã®è£œè¶³ã‚’ææ¡ˆ

**å…¥åŠ›**
- ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ± (ãƒˆãƒ”ãƒƒã‚¯ã€ç›®æ¬¡ã€æ—¢å­˜ã‚³ãƒ³ãƒ†ãƒ³ãƒ„)
- ç¾åœ¨åŸ·ç­†ä¸­ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³
- ç¾åœ¨ã®åŸ·ç­†å†…å®¹

**å‡ºåŠ›**
- ã‚µã‚¸ã‚§ã‚¹ãƒˆãƒªã‚¹ãƒˆ (å„ªå…ˆåº¦ä»˜ã)

**å®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**
```python
class SuggestionAgent:
    def __init__(self, anthropic_api_key: str):
        self.client = anthropic.Anthropic(api_key=anthropic_api_key)

    async def generate_suggestions(
        self,
        session: WritingSession,
        current_section_id: str,
        current_content: str
    ) -> List[Suggestion]:
        # Claude APIã‚’ä½¿ã£ã¦ã‚µã‚¸ã‚§ã‚¹ãƒˆç”Ÿæˆ
        prompt = self._build_prompt(session, current_section_id, current_content)
        response = await self._call_claude(prompt)
        suggestions = self._parse_response(response)
        return suggestions

    def _build_prompt(self, session, section_id, content):
        # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹ç¯‰
        return f"""
ã‚ãªãŸã¯æŠ€è¡“ãƒ–ãƒ­ã‚°ã®åŸ·ç­†ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚

ã€è¨˜äº‹ã®å…¨ä½“æ§‹æˆã€‘
ãƒˆãƒ”ãƒƒã‚¯: {session.topic}
å¯¾è±¡èª­è€…: {session.target_audience}
ç›®æ¬¡:
{self._format_outline(session.outline)}

ã€ç¾åœ¨åŸ·ç­†ä¸­ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã€‘
{section_id}

ã€åŸ·ç­†å†…å®¹ã€‘
{content}

ä¸Šè¨˜ã‚’åˆ†æã—ã¦ã€ä»¥ä¸‹ã®è¦³ç‚¹ã§ã‚µã‚¸ã‚§ã‚¹ãƒˆã‚’3ã¤ç”Ÿæˆã—ã¦ãã ã•ã„:
1. content: æ¬¡ã«æ›¸ãã¹ãå†…å®¹ã®ææ¡ˆ
2. structure: æ§‹æˆã®æ”¹å–„ææ¡ˆ
3. improvement: æ—¢å­˜å†…å®¹ã®æ”¹å–„ææ¡ˆ

å„ã‚µã‚¸ã‚§ã‚¹ãƒˆã«ã¯å„ªå…ˆåº¦(1=é«˜, 2=ä¸­, 3=ä½)ã‚’ä»˜ã‘ã¦ãã ã•ã„ã€‚
JSONå½¢å¼ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚
"""
```

---

## å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### Phase 1: åŸºæœ¬APIå®Ÿè£… (MCPç„¡ã—)
**ç›®æ¨™**: æœ€å°é™ã®ã‚µã‚¸ã‚§ã‚¹ãƒˆæ©Ÿèƒ½ã‚’å‹•ä½œã•ã›ã‚‹

- [x] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­è¨ˆ
- [ ] ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆä½œæˆ
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®šç¾© (schemas)
- [ ] ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹ (services/assistant_service.py)
- [ ] ã‚µã‚¸ã‚§ã‚¹ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè£… (agents/suggestion_agent.py)
- [ ] APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£… (routers/assistant.py)
- [ ] å‹•ä½œç¢ºèª (curlã§ãƒ†ã‚¹ãƒˆ)

**æˆæœç‰©**
- `/assistant/session/create` ãŒå‹•ä½œ
- `/assistant/suggest` ãŒå‹•ä½œ
- Claude APIã§ã‚µã‚¸ã‚§ã‚¹ãƒˆç”Ÿæˆ

---

### Phase 1.5: MCPçµ±åˆ
**ç›®æ¨™**: é–¢é€£ãƒªãƒ³ã‚¯ãƒ»è¦ç´„ãƒ¬ãƒãƒ¼ãƒˆã®è¡¨ç¤º

- [ ] MCPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£… (mcp/web_search_client.py)
- [ ] æ¤œç´¢ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè£… (agents/search_agent.py)
- [ ] SuggestionAgentã«æ¤œç´¢æ©Ÿèƒ½çµ±åˆ
- [ ] related_linksã®å®Ÿè£…
- [ ] summary_reportã®å®Ÿè£…

**æˆæœç‰©**
- ã‚µã‚¸ã‚§ã‚¹ãƒˆã«åŠ ãˆã¦ã€é–¢é€£ãƒªãƒ³ã‚¯ã‚‚è¿”å´ã•ã‚Œã‚‹
- æ¤œç´¢çµæœã®è¦ç´„ãƒ¬ãƒãƒ¼ãƒˆãŒç”Ÿæˆã•ã‚Œã‚‹

---

### Phase 2: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…
**ç›®æ¨™**: Reactã§ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼+ã‚µã‚¤ãƒ‰ãƒãƒ¼UIæ§‹ç¯‰

- [ ] Reactãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- [ ] ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼çµ±åˆ
- [ ] ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤ºUI
- [ ] APIã¨ã®é€£æº

**æˆæœç‰©**
- ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ + ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®UI
- ã‚µã‚¸ã‚§ã‚¹ãƒˆãƒœã‚¿ãƒ³ã§ææ¡ˆãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **FastAPI**: REST API
- **Anthropic Claude API**: ã‚µã‚¸ã‚§ã‚¹ãƒˆç”Ÿæˆ
- **Pydantic**: ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- **UUID**: ã‚»ãƒƒã‚·ãƒ§ãƒ³IDç”Ÿæˆ
- **MCP Clients** (Phase 1.5): Webæ¤œç´¢ãƒ»å–å¾—

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (Phase 2)
- **React**: UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **react-markdown-editor-lite**: ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼
- **react-markdown**: ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
- **axios**: APIé€šä¿¡

---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
backend/
â”œâ”€â”€ agents/                      # ğŸ†• ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ suggestion_agent.py      # ã‚µã‚¸ã‚§ã‚¹ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
â”‚
â”œâ”€â”€ mcp/                         # ğŸ†• MCPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (Phase 1.5)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ web_search_client.py
â”‚
â”œâ”€â”€ routers/
â”‚   â”œâ”€â”€ generate.py              # æ—¢å­˜
â”‚   â”œâ”€â”€ publish.py               # æ—¢å­˜
â”‚   â””â”€â”€ assistant.py             # ğŸ†• ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆAPI
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ generate_service.py      # æ—¢å­˜
â”‚   â”œâ”€â”€ publish_service.py       # æ—¢å­˜
â”‚   â”œâ”€â”€ zenn_service.py          # æ—¢å­˜
â”‚   â””â”€â”€ assistant_service.py     # ğŸ†• ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚µãƒ¼ãƒ“ã‚¹
â”‚
â”œâ”€â”€ schemas/
â”‚   â”œâ”€â”€ generate_schema.py       # æ—¢å­˜
â”‚   â”œâ”€â”€ publish_schemas.py       # æ—¢å­˜
â”‚   â””â”€â”€ assistant_schemas.py     # ğŸ†• ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚¹ã‚­ãƒ¼ãƒ
â”‚
â””â”€â”€ core/
    â”œâ”€â”€ settings.py              # æ—¢å­˜ (ANTHROPIC_API_KEYã‚’è¿½åŠ )
    â””â”€â”€ logger.py                # æ—¢å­˜
```

---

## ç’°å¢ƒå¤‰æ•°

`.env` ã«è¿½åŠ :

```bash
# Claude API (ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç”¨)
ANTHROPIC_API_KEY=your-anthropic-api-key

# MCPè¨­å®š (Phase 1.5)
BRAVE_SEARCH_API_KEY=your-brave-api-key
MCP_WEB_SEARCH_PORT=3000
MCP_WEB_FETCH_PORT=3001
```

---

## ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª

### ã‚·ãƒŠãƒªã‚ª1: ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ

```bash
curl -X POST http://localhost:8000/assistant/session/create \
  -H "Content-Type: application/json" \
  -d '{
    "topic": "FastAPIã§JWTèªè¨¼ã‚’å®Ÿè£…ã™ã‚‹",
    "target_audience": "intermediate"
  }'
```

**æœŸå¾…çµæœ**: ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã¨è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸç›®æ¬¡ãŒè¿”å´ã•ã‚Œã‚‹

---

### ã‚·ãƒŠãƒªã‚ª2: ã‚µã‚¸ã‚§ã‚¹ãƒˆç”Ÿæˆ

```bash
curl -X POST http://localhost:8000/assistant/suggest \
  -H "Content-Type: application/json" \
  -d '{
    "session_id": "sess_abc123def456",
    "current_section_id": "section_3",
    "current_content": "# FastAPIã§ã®å®Ÿè£…\n\nã¾ãšã€å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™..."
  }'
```

**æœŸå¾…çµæœ**: 3ã¤ã®ã‚µã‚¸ã‚§ã‚¹ãƒˆãŒå„ªå…ˆåº¦ä»˜ãã§è¿”å´ã•ã‚Œã‚‹

---

## æˆåŠŸåŸºæº–

### Phase 1å®Œäº†ã®å®šç¾©
- [x] ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆAPIãŒå‹•ä½œã™ã‚‹
- [ ] ã‚µã‚¸ã‚§ã‚¹ãƒˆç”ŸæˆAPIãŒå‹•ä½œã™ã‚‹
- [ ] Claude APIã§é©åˆ‡ãªã‚µã‚¸ã‚§ã‚¹ãƒˆãŒç”Ÿæˆã•ã‚Œã‚‹
- [ ] curlã§ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®ãƒ†ã‚¹ãƒˆãŒé€šã‚‹

### Phase 1.5å®Œäº†ã®å®šç¾©
- [ ] é–¢é€£ãƒªãƒ³ã‚¯ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] è¦ç´„ãƒ¬ãƒãƒ¼ãƒˆãŒç”Ÿæˆã•ã‚Œã‚‹
- [ ] MCPçµŒç”±ã§Zenn/Qiitaã‚’æ¤œç´¢ã§ãã‚‹

### Phase 2å®Œäº†ã®å®šç¾©
- [ ] Reactã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§åŸ·ç­†ã§ãã‚‹
- [ ] ã‚µã‚¸ã‚§ã‚¹ãƒˆãƒœã‚¿ãƒ³ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ææ¡ˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå‹•ä½œã™ã‚‹

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. âœ… è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
2. â³ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆä½œæˆ
3. â³ ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®Ÿè£…
4. â³ ã‚µã‚¸ã‚§ã‚¹ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè£…
5. â³ APIå®Ÿè£…
6. â³ å‹•ä½œç¢ºèª

---

## å‚è€ƒè³‡æ–™

- [Anthropic Claude API Documentation](https://docs.anthropic.com/)
- [FastAPI Documentation](https://fastapi.tiangolo.com/)
- [MCP Documentation](https://modelcontextprotocol.io/)
